<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Date Invitation</title>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 32px 18px;
      background-color: #f5f4f2;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                   Roboto, Helvetica, Arial, sans-serif;
      color: #2a2a2a;
    }

    .card {
      background: #ffffff;
      max-width: 520px;
      width: 100%;
      padding: 36px 32px 34px 32px;
      border-radius: 18px;
      line-height: 1.75;
      white-space: pre-wrap;
      position: relative;
      overflow: hidden;

      border: 1.5px solid #f0d9df;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);

      opacity: 0;
      transform: translateY(8px);
      animation: fadeIn 0.7s ease forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card:hover {
      box-shadow: 0 16px 36px rgba(0, 0, 0, 0.10);
    }

    .title-box {
      display: inline-block;
      margin: 0 auto 18px auto;
      padding: 7px 16px;
      border-radius: 999px;
      border: 1.5px solid #f0d9df;
      color: #b86b7a;
      font-size: 13px;
      letter-spacing: 0.4px;
      background: #fff7f9;
    }

    .corner-heart {
      position: absolute;
      font-size: 14px;
      color: #e7a1b0;
      opacity: 0.9;
      user-select: none;
      z-index: 2;
    }

    .corner-heart.tl { top: 12px; left: 14px; }
    .corner-heart.tr { top: 12px; right: 14px; }
    .corner-heart.bl { bottom: 12px; left: 14px; }
    .corner-heart.br { bottom: 12px; right: 14px; }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
      font-size: 13px;
      color: #888;
    }

    .label {
      letter-spacing: 0.3px;
    }

    .hint {
      font-size: 12px;
    }

    .output {
      font-size: 20px;
      letter-spacing: 0.1px;
    }

    .cursor {
      display: inline-block;
      margin-left: 2px;
      animation: blink 1s steps(1) infinite;
    }

    @keyframes blink {
      50% {
        opacity: 0;
      }
    }

    /* click ripple */
    .ripple {
      position: absolute;
      border-radius: 999px;
      transform: translate(-50%, -50%);
      background: rgba(231, 161, 176, 0.20);
      pointer-events: none;
      animation: ripple 550ms ease-out forwards;
      z-index: 1;
    }

    @keyframes ripple {
      from { width: 0; height: 0; opacity: 1; }
      to   { width: 420px; height: 420px; opacity: 0; }
    }

    /* floating hearts animation after typing */
    .float-heart {
      position: absolute;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 16px;
      color: #e7a1b0;
      opacity: 0;
      pointer-events: none;
      animation: floatUp 2.2s ease-in forwards;
    }

    @keyframes floatUp {
      0%   { transform: translateX(-50%) translateY(0) scale(0.9); opacity: 0; }
      15%  { opacity: 0.9; }
      100% { transform: translateX(-50%) translateY(-160px) scale(1.15); opacity: 0; }
    }

    /* subtle tilt on desktop */
    @media (hover:hover) {
      .card {
        transform-style: preserve-3d;
      }
    }
  </style>
</head>

<body>
  <div class="card" id="card">
    <span class="corner-heart tl">♥</span>
    <span class="corner-heart tr">♥</span>
    <span class="corner-heart bl">♥</span>
    <span class="corner-heart br">♥</span>

    <div style="text-align:center;">
      <div class="title-box">Date Invitation</div>
    </div>

    <div class="header">
      <div class="label">Message</div>
      <div class="hint">Tap card to skip</div>
    </div>

    <div class="output" id="output"></div>
    <span class="cursor" id="cursor">|</span>
  </div>

  <script>
    const lines = ["Hi Ivy,", "", "Want to go on a date this Sunday, 1/11?", "", "West Village. I will plan it. Dinner and then we can wander around after.", "", "I would really like to see you and spend the evening together.", "", "Let me know what you think.", "", "- Chris <3"];

    const out = document.getElementById("output");
    const cursor = document.getElementById("cursor");
    const card = document.getElementById("card");

    let line = 0;
    let char = 0;
    let skipping = false;

    const typeSpeed = 28;
    const linePause = 220;

    function renderAll() {
      out.textContent = lines.join("\n");
      cursor.style.display = "none";
      launchHeartBurst();
    }

    card.addEventListener("click", (e) => {
      // ripple
      const r = document.createElement("span");
      r.className = "ripple";
      const rect = card.getBoundingClientRect();
      r.style.left = (e.clientX - rect.left) + "px";
      r.style.top = (e.clientY - rect.top) + "px";
      card.appendChild(r);
      setTimeout(() => r.remove(), 600);

      // skip typing if not finished
      if (!skipping && cursor.style.display !== "none") {
        skipping = true;
        renderAll();
      }
    });

    function type() {
      if (skipping) return;

      if (line >= lines.length) {
        cursor.style.display = "none";
        launchHeartBurst();
        return;
      }

      const current = lines[line];

      if (char < current.length) {
        out.textContent += current[char];
        char++;
        setTimeout(type, typeSpeed);
      } else {
        out.textContent += "\n";
        if (line < lines.length - 1) out.textContent += "\n";
        line++;
        char = 0;
        setTimeout(type, linePause);
      }
    }

    // floating hearts burst when finished
    function launchHeartBurst() {
      const count = 9;
      for (let i = 0; i < count; i++) {
        const h = document.createElement("div");
        h.className = "float-heart";
        h.textContent = "♥";

        // randomize start x and size a bit
        const x = 18 + Math.random() * (card.clientWidth - 36);
        const size = 14 + Math.random() * 10;
        const delay = Math.random() * 0.55;

        h.style.left = x + "px";
        h.style.fontSize = size + "px";
        h.style.animationDelay = delay + "s";

        card.appendChild(h);
        setTimeout(() => h.remove(), 2600);
      }
    }

    // subtle tilt on desktop only
    card.addEventListener("mousemove", (e) => {
      if (!window.matchMedia("(hover:hover)").matches) return;
      const rect = card.getBoundingClientRect();
      const x = (e.clientX - rect.left) / rect.width - 0.5;
      const y = (e.clientY - rect.top) / rect.height - 0.5;
      const rx = (-y * 3).toFixed(2);
      const ry = (x * 3).toFixed(2);
      card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
    });

    card.addEventListener("mouseleave", () => {
      card.style.transform = "";
    });

    type();
  </script>
</body>
</html>
